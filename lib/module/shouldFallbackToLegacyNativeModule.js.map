{"version":3,"names":["NativeModules","shouldFallbackToLegacyNativeModule","expoConstants","modulesConstants","ExponentConstants","isLegacySdkVersion","appOwnership","executionEnvironment","includes"],"sources":["shouldFallbackToLegacyNativeModule.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\r\n\r\nexport function shouldFallbackToLegacyNativeModule(): boolean {\r\n  const expoConstants =\r\n    NativeModules['NativeUnimoduleProxy']?.modulesConstants?.ExponentConstants;\r\n\r\n  if (expoConstants) {\r\n    /**\r\n     * In SDK <= 39, appOwnership is defined in managed apps but executionEnvironment is not.\r\n     * In bare React Native apps using expo-constants, appOwnership is never defined, so\r\n     * isLegacySdkVersion will be false in that context.\r\n     */\r\n    const isLegacySdkVersion =\r\n      expoConstants.appOwnership && !expoConstants.executionEnvironment;\r\n\r\n    /**\r\n     * Expo managed apps don't include the @react-native-async-storage/async-storage\r\n     * native modules yet, but the API interface is the same, so we can use the version\r\n     * exported from React Native still.\r\n     *\r\n     * If in future releases (eg: @react-native-async-storage/async-storage >= 2.0.0) this\r\n     * will likely not be valid anymore, and the package will need to be included in the Expo SDK\r\n     * to continue to work.\r\n     */\r\n    if (\r\n      isLegacySdkVersion ||\r\n      ['storeClient', 'standalone'].includes(expoConstants.executionEnvironment)\r\n    ) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,cAA9B;AAEA,OAAO,SAASC,kCAAT,GAAuD;EAAA;;EAC5D,MAAMC,aAAa,4BACjBF,aAAa,CAAC,sBAAD,CADI,oFACjB,sBAAuCG,gBADtB,2DACjB,uBAAyDC,iBAD3D;;EAGA,IAAIF,aAAJ,EAAmB;IACjB;AACJ;AACA;AACA;AACA;IACI,MAAMG,kBAAkB,GACtBH,aAAa,CAACI,YAAd,IAA8B,CAACJ,aAAa,CAACK,oBAD/C;IAGA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IACI,IACEF,kBAAkB,IAClB,CAAC,aAAD,EAAgB,YAAhB,EAA8BG,QAA9B,CAAuCN,aAAa,CAACK,oBAArD,CAFF,EAGE;MACA,OAAO,IAAP;IACD;EACF;;EAED,OAAO,KAAP;AACD"}